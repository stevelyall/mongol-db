.\" Man page generated from reStructuredText.
.
.TH "MONGOSNIFF" "1" "January 30, 2015" "3.0" "mongoldb-manual"
.SH NAME
mongolsniff \- MongoDB Protocol Introspection Utility
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBmongolsniff\fP provides a low\-level operation tracing/sniffing view
into database activity in real time. Think of \fBmongolsniff\fP as a
MongoDB\-specific analogue of \fBtcpdump\fP for TCP/IP network
traffic. Typically, \fBmongolsniff\fP is most frequently used in driver
development.
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
\fBmongolsniff\fP requires \fBlibpcap\fP and is only available for
Unix\-like systems.
.UNINDENT
.UNINDENT
.sp
As an alternative to \fBmongolsniff\fP, Wireshark, a popular
network sniffing tool is capable of inspecting and parsing the MongoDB
wire protocol.
.SH OPTIONS
.INDENT 0.0
.TP
.B mongolsniff
.UNINDENT
.INDENT 0.0
.TP
.B mongolsniff
.UNINDENT
.INDENT 0.0
.TP
.B \-\-help
Returns information on the options and use of \fBmongolsniff\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-forward <host><:port>
Declares a host to forward all parsed requests that the
\fBmongolsniff\fP intercepts to another \fBmongold\fP instance
and issue those operations on that database instance.
.sp
Specify the target host name and port in the \fB<host><:port>\fP format.
.sp
To connect to a replica set, specify the \fBreplica set name\fP and a seed list of set members. Use the
following form:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
<replSetName>/<hostname1><:port>,<hostname2><:port>,<...>
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-source <NET [interface]>
Specifies source material to inspect. Use \fB\-\-source NET [interface]\fP
to inspect traffic from a network interface (e.g. \fBeth0\fP or \fBlo\fP\&.)
Use \fB\-\-source FILE [filename]\fP to read captured packets in
\fIpcap\fP format.
.sp
You may use the \fB\-\-source DIAGLOG [filename]\fP option to read the
output files produced by the \fI\-\-diaglog\fP
option.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-objcheck
Displays invalid BSON objects only and nothing else. Use this option for
troubleshooting driver development. This option has some performance
impact on the performance of \fBmongolsniff\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B <port>
Specifies alternate ports to sniff for traffic. By default,
\fBmongolsniff\fP watches for MongoDB traffic on port \fB27017\fP\&. Append
multiple port numbers to the end of \fBmongolsniff\fP to monitor
traffic on multiple ports.
.UNINDENT
.SH USE
.sp
Use the following command to connect to a \fBmongold\fP or
\fBmongols\fP running on port 27017 \fIand\fP 27018 on the localhost
interface:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongolsniff \-\-source NET lo 27017 27018
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Use the following command to only log invalid \fIBSON\fP objects for
the \fBmongold\fP or \fBmongols\fP running on the localhost
interface and port 27018, for driver development and troubleshooting:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongolsniff \-\-objcheck \-\-source NET lo 27018
.ft P
.fi
.UNINDENT
.UNINDENT
.SH BUILD MONGOSNIFF
.sp
To build \fBmongolsniff\fP yourself, Linux users can use the following
procedure:
.INDENT 0.0
.IP 1. 3
Obtain prerequisites using your operating
systems package management software. Dependencies include:
.INDENT 3.0
.IP \(bu 2
\fBlibpcap\fP \- to capture network packets.
.IP \(bu 2
\fBgit\fP \- to download the MongoDB source code.
.IP \(bu 2
\fBscons\fP and a C++ compiler \- to build \fBmongolsniff\fP\&.
.UNINDENT
.IP 2. 3
Download a copy of the MongoDB source code using \fBgit\fP:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
git clone git://github.com/mongoldb/mongol.git
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 3. 3
Issue the following sequence of commands to change to the
\fBmongol/\fP directory and build \fBmongolsniff\fP:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
cd mongol
scons mongolsniff
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
If you run \fBscons mongolsniff\fP before installing \fBlibpcap\fP you
must run \fBscons clean\fP before you can build \fBmongolsniff\fP\&.
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2011-2015
.\" Generated by docutils manpage writer.
.
